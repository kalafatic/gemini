<?xml version="1.0" encoding="UTF-8"?>
<project name="Assemble All Config of org.eclipse.pde.build.container.feature" default="main">
	<macrodef name="assemble">
		<attribute name="config" />
		<attribute name="element" />
		<attribute name="dot" />
		<attribute name="scriptPrefix" />
		<sequential>
			<condition property="defaultAssemble.@{config}" value="defaultAssemble" else="assemble.@{element}@{dot}@{config}"			>
				<isset property="defaultAssemblyEnabled"/>
			</condition>
			<condition property="customOrDefault.@{config}" value="assemble.@{element}@{dot}@{config}" else="${defaultAssemble.@{config}}"			>
				<isset property="assemble.@{element}@{dot}@{config}"/>
			</condition>
			<ant antfile="${customTargets}" target="${customOrDefault.@{config}}">
				<property name="config" value="@{config}"/>
				<property name="element" value="@{element}"/>
				<property name="assembleScriptName" value="@{scriptPrefix}.@{element}@{dot}@{config}.xml"/>
			</ant>
		</sequential>
	</macrodef>
	<property name="p2.product.qualifier" value="201111071014"/>

	<target name="main">
		<assemble  config="p2" element="org.eclipse.pde.build.container.feature" dot="." scriptPrefix="assemble"		/>
		<assemble  config="win32.win32.x86" element="org.eclipse.pde.build.container.feature" dot="." scriptPrefix="assemble"		/>
	</target>
	<target name="replace.p2.product">
		<copy file="C:\Program Files\Adobe\Reader 9.0\Reader\AIR\Projects\GEMINI\DP-071111\eu.kalafatic.gemini.core\products\core.product" tofile="${buildDirectory}/features/org.eclipse.pde.build.container.feature/product/core.product" overwrite="true"/>
		<copy file="C:\Program Files\Adobe\Reader 9.0\Reader\AIR\Projects\GEMINI\DP-071111\eu.kalafatic.gemini.core\products\p2.inf" todir="${buildDirectory}/features/org.eclipse.pde.build.container.feature/product/" failonerror="false" overwrite="true"/>
		<eclipse.idReplacer productFilePath="${buildDirectory}/features/org.eclipse.pde.build.container.feature/product/core.product"
		                    selfVersion="1.0.0.${p2.product.qualifier}" 
		                    featureIds="eu.kalafatic.gemini.core.module:2.0.3,2.0.3.201111071014,"/>
	</target>

</project>
